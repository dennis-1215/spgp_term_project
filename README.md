# spgp_term_project
2024 스마트폰게임 프로그래밍 텀프로젝트

## 게임 컨셉
### High Concept
- 로그라이크 디펜스 게임
- 성벽으로 몰려드는 적을 처치한다.
- 체력(성벽의 내구도)이 0이 되면 게임오버
- 게임진행 시간과 킬수를 통해 점수를 계산

### 핵심 메카닉
- 위에서 아래로 이동하는 랜덤한 종류의 적이 맵 최상단에서 소환
- 시간이 지날수록 적이 자주, 많이 소환됨.
- 적을 처치하면 경험치를 얻고 레벨업을 하면 게임이 일시정지되며 공격을 강화할 수 있는 선택지 3개 제공
- 성벽에 가장 가까이 있는 적을 자동으로 공격
- 적이 죽을때 일정확률로 경험치를 대량으로 드롭

### 개발 범위
1. 적 : 3종류(속도와 체력의 차이가 있는 적 3종류)
   * 적A : 이동속도 10, 체력 1000, 크기 큼
   * 적B : 이동속도 20, 체력 500, 크기 작음
   * 적C : 이동속도 40, 체력 200, 크기 매우 작음
   - 적들은 1분마다 체력이 2배로 늘어난다.
   - 공격력은 모두 동일하며 초당 50의 데미지를 입힌다.
2. 공격 강화 : 옵션 4개(공격속도, 공격력, 투사체 개수, 발사횟수)
   - 공격속도 : 기본 3초에 1회 공격, lv당 10%의 쿨타임 감소로 3 * 0.9^lv
     - (lv0 = 3.0, lv1 = 2.7, lv2 = 2.43 ... lv17 = 0.50 이 최대)
   - 공격력 : 기본 데미지 50, lv당 20%의 공격력 증가 50 * 1.2^lv (업그레이드에 제한이 없다.)
   - 투사체 개수 : 업그레이드 당 1개씩 추가 최대 9개까지 증가
     - (lv0 = 정면, lv1,lv2 = 각 좌측/우측 10도 방향으로 추가발사, lv3,lv4 = 20도 ... lv7,lv8 = 40도)
   - 발사횟수 : 업그레이드당 1회 추가(최대 8회)
3. 플레이어 체력 : 1000
4. 씬 : 4개(타이틀화면, 게임화면, 선택지화면, 결과화면)
   - 타이틀 화면 : 게임 이름이 있는 배경, 게임 시작버튼, bgm으로 구성 
   - 게임 화면 : UI(레벨, 시간, 경험치바, 체력바), 캐릭터(적, 플레이어), 배경, 사운드(bgm, 피격음, 타격음)
   - 선택지 화면 : 카드 3개(카드는 이미지, 설명, 강화 레벨로 구성)를 화면 중앙에 가로로 나란히 배열
     - 선택지는 랜덤하게 선정되며 동일한 선택지가 나올 수 있음 (예 : 공격력, 공격력, 공격속도)
     - 업그레이드가 완료된 옵션은 선택지에 등장하지 않음.
   - 결과 화면 : 레벨, 시간, 킬 수 등의 정보와 점수를 표기하고 타이틀 화면으로 돌아가는 버튼과 다시하기 버튼으로 구성 

## 예상 게임 흐름
게임 화면　　　　　　　　　　　　　　　　　　　　선택지 화면

![게임 진행](https://github.com/dennis-1215/spgp_term_project/assets/37973668/1d0600fa-da8d-4bd4-8d45-7fdc989422da) ![강화 선택지](https://github.com/dennis-1215/spgp_term_project/assets/37973668/8532286e-e0ff-493c-bbe7-e97b9d769ff6)

## 개발 일정 및 진행률
| 주차 | 개발 목표 | 세부사항 | 진행정도 |
|:---|:---:|:---|:---:|
| 1주차 | 리소스 수집 | 배경, 적, 사운드, UI, 플레이어의 리소스 수집 | 100% |
| 2주차 | 게임씬 구성 | 배경, 플레이어, UI 등을 화면에 배치 | 100% |
| 3주차 | 적 생성 | 적 3종류에 대한 속성값과 이동 구현 | 100% |
| 4주차 | 플레이어 공격 | 가장 가까이 있는 적을 공격 및 처치하여 경험치 획득 | 100% |
| 5주차 | 선택지씬 구성  | 레벨업을 하면 공격강화 선택지 화면이 뜨도록 구현  | 100 % |
| 6주차 | 선택지 구현 | 선택한 강화 내용이 플레이어 공격에 반영 되도록 구현 | 100% |
| 7주차 | 타이틀 & 결과씬 구성 | 타이틀 화면과 게임오버 시 점수 계산 및 결과를 출력하는 화면 구현 | 100% |
| 8주차 | 사운드 추가 | bgm, 효과음을 추가 | 100% |
| 9주차 | 최종점검 | 디버그 및 코드 정리 | 100% |

## 주차별 커밋 수
![image](https://github.com/dennis-1215/spgp_termproject/assets/37973668/0ebb3fa5-8eb8-42e6-8572-de060ba9933b)

| 주차 | 커밋 수 |
|:---|:---:|
| 1주차 | 3 | 
| 2주차 | 5 |
| 3주차 | 3 | 
| 4주차 | 3 |
| 5주차 | 21 |
| 6주차 | 5 |
| 7주차 | 3 | 
| 8주차 | 5 | 
| 9주차 | 2 | 
| +주차 | 5 |

## 사용한 기술
### 수업내용에서 차용한 것
1. 오브젝트들의 레이어화
   * 배경, 플레이어, 적, UI 등을 레이어화 하여 출력
2. 적 생성을 Generator를 통해 생성
   * 시간이 지남에 따라 강해지는 속성을 적용하기에 용이
   * 적은 Factory 패턴으로 구현되어 밸런스 조정할 때 수정할 곳이 적다

### 직접 개발한 것
선택지 화면
  * 선택지는 랜덤하게 뜨지만 Max레벨에 도달한 속성은 뜨지 않도록 변경

## 아쉬웠던 점
### 해결하지 못한 문제 
* 밸런스 조절이 생각보다 어려워 중간점을 찾지 못했다.
  - 너무 빨리 죽거나, 너무 오래산다.
* 게임이 단조롭다
  - 단조로움을 줄이기 위해 선택지를 추가했음에도 게임흐름에 큰 영향을 주지 못해 해결을 못했다.

### 판매를 위해 보충할 것들
* 리더보드를 통해 순위를 보여줘 고점 갱신을 위해 게임을 계속 하도록 동기부여
* 적을 더 다양하게 만들고, 선택지에 다양한 기믹을 추가해 단조로움 해결

## 수업에 대한 내용
### 좋았던 점
1. 다양한 디자인패턴을 구현해보며 디자인패턴의 이해도를 높일 수 있었다.
2. 여러 종류의 게임을 만들어 장르별로 다양한 기능의 구현방법을 알 수 있었다.
3. 커밋 로그를 제공하여 개발의 흐름 및 구현에 대한 이해가 쉬웠다.


## MainScene의 Game Object
1. Player
   * 그림 구성
   ![playersprite](https://github.com/dennis-1215/spgp_termproject/assets/37973668/226406f7-9f00-4b01-98c5-6ea002428915)
  
   * 동작 구성 : 일정시간마다 가장 가까운 적이 있는 방향으로 FireBall을 발사한다.
   * 속성 : 경험치, 공격속도, 레벨, 선택지별 강화 레벨
   
2. Enemy
   * 그림 구성
      - 적A : ![monster_a](https://github.com/dennis-1215/spgp_termproject/assets/37973668/b174902e-7154-4fd3-9409-1c00bcc81091)

      - 적B : ![monster_b](https://github.com/dennis-1215/spgp_termproject/assets/37973668/5fdee0d3-941f-4b79-8c03-e8af99099984)

      - 적C : ![monster_c](https://github.com/dennis-1215/spgp_termproject/assets/37973668/76a77e4a-ee6a-4572-8b85-e4bc6149b804)

   * 동작 구성 : 아래로 내려가다가 성벽에 도달하면 공격한다.   
   * 속성 : 속도, 공격력, 드랍할 경험치, 공격속도
   * 상호 작용
      - 총알 : 데미지를 받는다.
      - 성벽 : 이동을 멈추고 일정시간마다 데미지를 입힌다.

     
3. FireBall
   * 그림 구성 ![fireball_sheet](https://github.com/dennis-1215/spgp_termproject/assets/37973668/60cdc531-168d-4df1-8729-da77e2fc4333)

   * 동작 구성 : 초기에 받은 각도 방향으로 직진한다. 적과 충돌하면 데미지를 입히고 사라진다.
   * 속성 : 속도, 데미지
   * 상호 작용
      - 적 : 데미지를 입히고 사라진다.

     
4. Castle
   * 그림 구성![castle](https://github.com/dennis-1215/spgp_termproject/assets/37973668/cbf77433-67d8-4ba4-91ee-ccb2b6af8e31)
   * 속성 : 체력
   * 상호 작용
      - 적 : 적이 공격하면 데미지를 받는다.
